#include "sys/alt_stdio.h"
#include "system.h"
#include "altera_avalon_pio_regs.h"
#include <stdint.h>
#include "io.h"
#include "alt_types.h"

// Variables globales para el tiempo
volatile int hours = 0;
volatile int minutes = 0;
volatile int seconds = 0;

uint8_t num_to_seven_seg(int num) {
    // Patrones invertidos para un display de ánodo común
    static const uint8_t patterns[10] = {
    		0x3F, // 0
			0x06, // 1
			0x5B, // 2
			0x4F, // 3
			0x66, // 4
			0x6D, // 5
            0x7D, // 6
  	        0x07, // 7
  	        0x7F, // 8
   	        0x6F  // 9
    };

    return ~patterns[num];  // Invertir los bits
}

// Convertir un valor a su patrón de 7 segmentos
alt_u8 value_to_7_segment_pattern(int num) {
    return num_to_seven_seg[num];
}

void display_digit_on_sec_units(int digit) {
    uint8_t sseg = num_to_seven_seg(digit);
    IOWR_ALTERA_AVALON_PIO_DATA(SSEG_SEC_UNITS_BASE, sseg);
}

int main() {
    display_digit_on_sec_units(2);  // Mostrar el número 2
    while (1);
}
